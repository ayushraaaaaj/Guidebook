<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Guidebook</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: #1e293b;
        }

        .logo-icon svg {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 2px 4px rgba(79, 70, 229, 0.3));
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #5b52f0, #8b5cf6);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: rgba(71, 85, 105, 0.1);
            color: #475569;
            border: 1px solid rgba(71, 85, 105, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(71, 85, 105, 0.15);
        }

        /* Profile Container */
        .profile-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        /* Profile Card */
        .profile-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 16px;
            padding: 2rem;
            height: fit-content;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            margin: 0 auto 1.5rem;
            font-weight: 600;
        }

        .profile-name {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .profile-email {
            color: #64748b;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .profile-stats {
            display: grid;
            gap: 1rem;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(79, 70, 229, 0.05);
            border-radius: 8px;
            border-left: 3px solid #4f46e5;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.9rem;
        }

        .stat-value {
            font-weight: 600;
            color: #4f46e5;
        }

        .join-date {
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Main Content */
        .main-content {
            display: grid;
            gap: 2rem;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        /* Experience Form */
        .experience-form {
            display: grid;
            gap: 1rem;
        }

        .form-group {
            display: grid;
            gap: 0.5rem;
        }

        .form-label {
            font-weight: 500;
            color: #374151;
        }

        .form-input, .form-textarea {
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Experience List */
        .experience-list {
            display: grid;
            gap: 1rem;
        }

        .experience-item {
            padding: 1.5rem;
            background: rgba(248, 250, 252, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .experience-item:hover {
            background: rgba(248, 250, 252, 1);
            border-color: rgba(79, 70, 229, 0.2);
        }

        .experience-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .experience-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .experience-meta {
            color: #64748b;
            font-size: 0.9rem;
        }

        .experience-content {
            color: #374151;
            line-height: 1.6;
        }

        .experience-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .btn-small {
            padding: 0.25rem 0.75rem;
            font-size: 0.85rem;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: #64748b;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Dark Mode */
        body.dark-mode {
            background: #0f172a;
            color: #f1f5f9;
        }

        body.dark-mode .header {
            background: rgba(15, 23, 42, 0.9);
            border-bottom-color: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .logo {
            color: #f1f5f9;
        }

        body.dark-mode .profile-card,
        body.dark-mode .content-card {
            background: rgba(30, 41, 59, 0.9);
            border-color: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .stat-item {
            background: rgba(139, 92, 246, 0.1);
            border-left-color: #8b5cf6;
        }

        body.dark-mode .stat-value {
            color: #a855f7;
        }

        body.dark-mode .experience-item {
            background: rgba(51, 65, 85, 0.5);
            border-color: rgba(255, 255, 255, 0.05);
        }

        body.dark-mode .experience-item:hover {
            background: rgba(51, 65, 85, 0.8);
            border-color: rgba(139, 92, 246, 0.3);
        }

        body.dark-mode .form-input,
        body.dark-mode .form-textarea {
            background: rgba(51, 65, 85, 0.8);
            border-color: rgba(255, 255, 255, 0.1);
            color: #f1f5f9;
        }

        body.dark-mode .form-input:focus,
        body.dark-mode .form-textarea:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .profile-container {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 0 1rem;
            }

            .header-content {
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" fill="#4f46e5"/>
                        <path d="M35 25 C30 25, 25 30, 25 35 L25 45 C25 50, 30 55, 35 55 L40 55 C42 55, 44 57, 44 59 L44 65 C44 70, 49 75, 54 75 L65 75 C70 75, 75 70, 75 65 L75 55 C75 50, 70 45, 65 45 L60 45 C58 45, 56 43, 56 41 L56 35 C56 30, 51 25, 46 25 L35 25 Z" fill="white"/>
                    </svg>
                </div>
                <span class="logo-text">Guidebook</span>
            </a>
            <div class="nav-actions">
                <button class="btn btn-secondary" onclick="toggleTheme()">🌙</button>
                <button class="btn btn-primary" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <div class="profile-container">
        <div class="profile-card">
            <div class="profile-avatar" id="profileAvatar">U</div>
            <h2 class="profile-name" id="profileName">User Name</h2>
            <p class="profile-email" id="profileEmail">user@example.com</p>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-label">Experiences Shared</span>
                    <span class="stat-value" id="experienceCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Profile Views</span>
                    <span class="stat-value" id="profileViews">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Reputation</span>
                    <span class="stat-value" id="reputation">0</span>
                </div>
            </div>
            
            <div class="join-date">
                Member since <span id="joinDate">2024</span>
            </div>
        </div>

        <div class="main-content">
            <div class="content-card">
                <div class="card-header">
                    <h3 class="card-title">Share Your Experience</h3>
                </div>
                <form class="experience-form" id="experienceForm">
                    <div class="form-group">
                        <label class="form-label" for="experienceTitle">Title</label>
                        <input type="text" id="experienceTitle" class="form-input" placeholder="Enter experience title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="experienceContent">Your Experience</label>
                        <textarea id="experienceContent" class="form-textarea" placeholder="Share your experience, tips, or advice..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Share Experience</button>
                </form>
            </div>

            <div class="content-card">
                <div class="card-header">
                    <h3 class="card-title">My Experiences</h3>
                </div>
                <div class="experience-list" id="experienceList">
                    <div class="empty-state">
                        <div class="empty-icon">📝</div>
                        <p>You haven't shared any experiences yet.</p>
                        <p>Share your first experience above!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme management
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('gb:theme', isDark ? 'dark' : 'light');
            
            const themeBtn = document.querySelector('.nav-actions .btn-secondary');
            themeBtn.textContent = isDark ? '☀️' : '🌙';
        }

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('gb:theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.nav-actions .btn-secondary').textContent = '☀️';
            }
        }

        // Load user profile
        function loadProfile() {
            const userEmail = localStorage.getItem('gb:userEmail');
            const userName = localStorage.getItem('gb:userName');
            
            if (!userEmail) {
                window.location.href = 'login.html';
                return;
            }

            const users = JSON.parse(localStorage.getItem('gb:users') || '{}');
            const userData = users[userEmail];

            if (userData) {
                document.getElementById('profileName').textContent = userData.fullName;
                document.getElementById('profileEmail').textContent = userEmail;
                document.getElementById('profileAvatar').textContent = userData.fullName.charAt(0).toUpperCase();
                document.getElementById('experienceCount').textContent = userData.experiencesShared || 0;
                document.getElementById('profileViews').textContent = userData.profileViews || 0;
                document.getElementById('reputation').textContent = userData.reputation || 0;
                
                const joinDate = new Date(userData.joinDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long'
                });
                document.getElementById('joinDate').textContent = joinDate;
            }

            loadExperiences();
        }

        // Load user experiences
        function loadExperiences() {
            const userEmail = localStorage.getItem('gb:userEmail');
            const experiences = JSON.parse(localStorage.getItem('gb:experiences') || '[]');
            const userExperiences = experiences.filter(exp => exp.author === userEmail);
            
            const experienceList = document.getElementById('experienceList');
            
            if (userExperiences.length === 0) {
                experienceList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📝</div>
                        <p>You haven't shared any experiences yet.</p>
                        <p>Share your first experience above!</p>
                    </div>
                `;
                return;
            }

            experienceList.innerHTML = userExperiences.map(exp => `
                <div class="experience-item">
                    <div class="experience-header">
                        <div>
                            <h4 class="experience-title">${exp.title}</h4>
                            <div class="experience-meta">
                                ${new Date(exp.date).toLocaleDateString()} • ${exp.views || 0} views
                            </div>
                        </div>
                    </div>
                    <div class="experience-content">${exp.content}</div>
                    <div class="experience-actions">
                        <button class="btn btn-danger btn-small" onclick="deleteExperience('${exp.id}')">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        // Share experience
        document.getElementById('experienceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('experienceTitle').value;
            const content = document.getElementById('experienceContent').value;
            const userEmail = localStorage.getItem('gb:userEmail');
            const userName = localStorage.getItem('gb:userName');
            
            if (!title || !content) return;

            const experience = {
                id: Date.now().toString(),
                title: title,
                content: content,
                author: userEmail,
                authorName: userName,
                date: new Date().toISOString(),
                views: 0
            };

            // Save experience
            const experiences = JSON.parse(localStorage.getItem('gb:experiences') || '[]');
            experiences.unshift(experience);
            localStorage.setItem('gb:experiences', JSON.stringify(experiences));

            // Update user stats
            const users = JSON.parse(localStorage.getItem('gb:users') || '{}');
            if (users[userEmail]) {
                users[userEmail].experiencesShared = (users[userEmail].experiencesShared || 0) + 1;
                users[userEmail].reputation = (users[userEmail].reputation || 0) + 10;
                localStorage.setItem('gb:users', JSON.stringify(users));
            }

            // Reset form
            document.getElementById('experienceTitle').value = '';
            document.getElementById('experienceContent').value = '';

            // Reload profile and experiences
            loadProfile();
        });

        // Delete experience
        function deleteExperience(experienceId) {
            if (!confirm('Are you sure you want to delete this experience?')) return;

            const experiences = JSON.parse(localStorage.getItem('gb:experiences') || '[]');
            const updatedExperiences = experiences.filter(exp => exp.id !== experienceId);
            localStorage.setItem('gb:experiences', JSON.stringify(updatedExperiences));

            // Update user stats
            const userEmail = localStorage.getItem('gb:userEmail');
            const users = JSON.parse(localStorage.getItem('gb:users') || '{}');
            if (users[userEmail]) {
                users[userEmail].experiencesShared = Math.max(0, (users[userEmail].experiencesShared || 0) - 1);
                users[userEmail].reputation = Math.max(0, (users[userEmail].reputation || 0) - 10);
                localStorage.setItem('gb:users', JSON.stringify(users));
            }

            loadProfile();
        }

        // Logout
        function logout() {
            localStorage.removeItem('gb:loggedIn');
            localStorage.removeItem('gb:userEmail');
            localStorage.removeItem('gb:userName');
            window.location.href = 'login.html';
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            loadProfile();
        });
    </script>
</body>
</html>
